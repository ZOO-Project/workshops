

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Building blocks presentation - Using OGR and PgRouting based Web Services &mdash; ZOO-Project 1.7 documentation</title>
  
  <link href="http://fonts.googleapis.com/css?family=Days+One" rel="stylesheet" type="text/css">
  
  

  

  
  
    
      <link rel="search" type="application/opensearchdescription+xml" title="Search within ZOO-Project 1.7 documentation" href="../_static/opensearch.xml"/>
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="ZOO-Project 1.7 documentation" href="../index.html"/>
        <link rel="up" title="ZOO-Project workshop 2017" href="index.html"/>
        <link rel="next" title="Playing with buildign blocks - Creating JavaScript Web Services" href="js_services_chaining.html"/>
        <link rel="prev" title="Creating your first ZOO Service" href="first_service.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
	  <a class="shrink" href="http://zoo-project.org"><img src="http://zoo-project.org/img/zoo-sun-logo.png" class="img-responsive sun" style="display: inline;"> ZOO</a>
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../2023/index.html">ZOO-Project introduction to OGC API - Processes - Part 1: Core secutiy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2023/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2023/using_zoo_from_docker.html">Installation, configuration and ZOO-Kernel use</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2023/setup_security_basicauth.html">Secure access to specific end-points using HTTP Basic Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2023/setup_security_openid_connect.html">Using OpenID Connect 1.0 to authenticate</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2022/index.html">ZOO-Project workshop 2022</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2022/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2022/using_zoo_from_docker.html">Installation, configuration and ZOO-Kernel use</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2022/first_service.html">Creating your first ZOO Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2022/building_blocks_presentation.html">Building blocks presentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2022/js_services_chaining.html">Playing with building blocks</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">ZOO-Project workshop 2017</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="using_zoo_from_osgeolivevm.html">Configuration and ZOO-Kernel use</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_service.html">Creating your first ZOO Service</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Building blocks presentation - Using OGR and PgRouting based Web Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="js_services_chaining.html">Playing with buildign blocks - Creating JavaScript Web Services</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2016/index.html">ZOO-Project workshop 2016</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2016/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2016/using_zoo_from_osgeolivevm.html">Configuration and ZOO-Kernel use</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2016/first_service.html">Creating your first ZOO Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2016/building_blocks_presentation.html">Building blocks presentation - Using OGR and PgRouting based Web Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2016/js_services_chaining.html">Playing with buildign blocks - Creating JavaScript Web Services</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2015/index.html">ZOO-Project workshop 2015</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2015/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2015/using_zoo_from_osgeolivevm.html">Configuration and ZOO-Kernel use</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2015/first_service.html">Creating your first ZOO Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2015/building_blocks_presentation.html">Building blocks presentation - Using OGR and PgRouting based Web Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2015/js_services_chaining.html">Playing with buildign blocks - Creating JavaScript Web Services</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2014/index.html">ZOO-Project workshop 2014</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2014/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2014/using_zoo_from_osgeolivevm.html">Configuration and ZOO-Kernel use</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2014/first_service.html">Creating your first ZOO Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2014/building_blocks_presentation.html">Building blocks presentation - Using OGR and PgRouting based Web Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2014/js_services_chaining.html">Playing with buildign blocks - Creating JavaScript Web Services</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2013/index.html">ZOO-Project Workshop 2013</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2013/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2013/using_zoo_from_osgeolivevm.html">Configuration and ZOO-Kernel use</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2013/first_service.html">Create your first ZOO Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2013/building_blocks_presentation.html">Building blocks presentation - Using OGR and PgRouting based Web Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2013/js_services_chaining.html">Playing with buildign blocks - Creating JavaScript Web Services</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2012/index.html">ZOO-Project Workshop 2012</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2012/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2012/using_zoo_from_osgeolivevm.html">Configuration and ZOO-Kernel use</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2012/first_service.html">Creating your first ZOO Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2012/building_blocks_presentation.html">Presenting building blocks - Using OGR based Web Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2012/js_services_chaining.html">Playing with buildign blocks - Creating JavaScript Web Services</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2010/index.html">ZOO-Project Workshop 2010</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2010/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2010/using_zoo_from_osgeolivevm.html">Using ZOO from an OSGeoLive virtual machine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2010/ogr_base_vect_ops.html">Creating OGR based Web Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2010/building_wps_client_using_ol.html">Building a WPS client using OpenLayers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2010/exercise.html">Exercise</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">ZOO-Project</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">

    <li><a href="../index.html"> Workshops</a> &#8725; &#160;</li>
      
          <li><a href="index.html">ZOO-Project workshop 2017</a> &#8725; &#160;</li>
      
    <li>Building blocks presentation - Using OGR and PgRouting based Web Services</li>
      <li class="wy-breadcrumbs-aside">
        $Date$
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <section id="building-blocks-presentation-using-ogr-and-pgrouting-based-web-services">
<span id="ogr-base-vect-ops"></span><h1><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Building blocks presentation - Using OGR and PgRouting based Web Services</a><a class="headerlink" href="#building-blocks-presentation-using-ogr-and-pgrouting-based-web-services" title="Permalink to this heading">¶</a></h1>
<nav class="contents" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#building-blocks-presentation-using-ogr-and-pgrouting-based-web-services" id="id1">Building blocks presentation - Using OGR and PgRouting based Web Services</a></p>
<ul>
<li><p><a class="reference internal" href="#introduction" id="id2">Introduction</a></p></li>
<li><p><a class="reference internal" href="#services-provider-and-configuration-files" id="id3">Services Provider and configuration files</a></p></li>
<li><p><a class="reference internal" href="#the-buffer-service" id="id4">The Buffer Service</a></p></li>
<li><p><a class="reference internal" href="#the-intersection-service" id="id5">The Intersection Service</a></p></li>
<li><p><a class="reference internal" href="#the-difference-service" id="id6">The Difference Service</a></p></li>
<li><p><a class="reference internal" href="#the-routing-and-profile-services" id="id7">The Routing and Profile Services</a></p></li>
<li><p><a class="reference internal" href="#conclusion" id="id8">Conclusion</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>In this section, you will use the basic ZOO-Services : <code class="docutils literal notranslate"><span class="pre">Buffer</span></code>,
<code class="docutils literal notranslate"><span class="pre">Intersection</span></code> and <code class="docutils literal notranslate"><span class="pre">Difference</span></code> which use OGR and psycopg Python
modules by using a User Interface using the ZOO-Client to invoke WPS
requests.
The intended goal of this section is to present and interact with your
new building blocks before chaining them in the next section.</p>
<p>To get this demo working, you need to follow the <a class="reference external" href="https://live.osgeo.org/en/quickstart/pgrouting_quickstart.html">PgRouting quick
start</a> and
then, to run the following command.</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span><span class="w"> </span><span class="o">~/</span><span class="n">Downloads</span><span class="w"></span>
<span class="n">wget</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">zoo</span><span class="o">-</span><span class="n">project</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">dl</span><span class="o">/</span><span class="mi">2017</span><span class="o">/</span><span class="n">zoo</span><span class="o">-</span><span class="n">ws</span><span class="o">-</span><span class="mf">2017.</span><span class="n">tar</span><span class="o">.</span><span class="n">bz2</span><span class="w"></span>
<span class="n">sudo</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">xvjpf</span><span class="w"> </span><span class="n">zoo</span><span class="o">-</span><span class="n">ws</span><span class="o">-</span><span class="mf">2017.</span><span class="n">tar</span><span class="o">.</span><span class="n">bz2</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="o">/</span><span class="w"></span>
<span class="n">wget</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">zoo</span><span class="o">-</span><span class="n">project</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">dl</span><span class="o">/</span><span class="mi">2017</span><span class="o">/</span><span class="n">ws2017</span><span class="o">.</span><span class="n">sql</span><span class="w"></span>
<span class="n">psql</span><span class="w"> </span><span class="n">city_routing</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="n">ws2017</span><span class="o">.</span><span class="n">sql</span><span class="w"></span>
</pre></div>
</div>
<p>Then, you should use the following links to access the user
interfaces and interact with your services, the first one is used to
access basic spatial-tools demo client interface and  the second to
access the routing application :</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="http://localhost/zoo-demo/ogr-example.html">http://localhost/zoo-demo/ogr-example.html</a></p></li>
<li><p><a class="reference external" href="http://localhost/zoo-demo-2017/routing.html">http://localhost/zoo-demo-2017/routing.html</a></p></li>
<li><p><a class="reference external" href="http://localhost/zoo-demo-2017/routing.html">http://localhost/zoo-demo-2017/spatialtool-bs1.html</a></p></li>
</ul>
</div></blockquote>
</section>
<section id="services-provider-and-configuration-files">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Services Provider and configuration files</a><a class="headerlink" href="#services-provider-and-configuration-files" title="Permalink to this heading">¶</a></h2>
<p>First you may verify if the ZOO-Services are available from your current setup.
You can take a look at the <code class="docutils literal notranslate"><span class="pre">Buffer.zcfg</span></code>, <code class="docutils literal notranslate"><span class="pre">Intersection.zcfg</span></code> and
<code class="docutils literal notranslate"><span class="pre">Difference.zcfg</span></code> to get details about parameters.
As you can see from the ZCFG files, you will use ZOO-Services provided by the
<code class="docutils literal notranslate"><span class="pre">ogr_service.zo</span></code> C service provider. So if you want to modify the Python code
you will have to edit the corresponding file (so <code class="docutils literal notranslate"><span class="pre">service.py</span></code>).
You are invited to use similar requests as the one used in previous
sections to learn about each services individually.</p>
</section>
<section id="the-buffer-service">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">The Buffer Service</a><a class="headerlink" href="#the-buffer-service" title="Permalink to this heading">¶</a></h2>
<p>First click on a street then once the street is displayed in blue, click the
‘Buffer’ button on top, you should get similar result as displayed in the following.</p>
<a class="reference internal image-reference" href="../_images/Buffer_Level_155.png"><img alt="../_images/Buffer_Level_155.png" class="align-center" src="../_images/Buffer_Level_155.png" style="width: 650px;" /></a>
</section>
<section id="the-intersection-service">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">The Intersection Service</a><a class="headerlink" href="#the-intersection-service" title="Permalink to this heading">¶</a></h2>
<p>Using the same client interface as before, once you get a Buffer, you can then
select a street intersecting the Buffer geometry to compute intersection by clicking on the Intersection button.</p>
<a class="reference internal image-reference" href="../_images/Intersection_Level_155.png"><img alt="../_images/Intersection_Level_155.png" class="align-center" src="../_images/Intersection_Level_155.png" style="width: 650px;" /></a>
</section>
<section id="the-difference-service">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">The Difference Service</a><a class="headerlink" href="#the-difference-service" title="Permalink to this heading">¶</a></h2>
<p>Using the same instructions as for Intersetion, you can get the following result.</p>
<a class="reference internal image-reference" href="../_images/Difference_Level_155.png"><img alt="../_images/Difference_Level_155.png" class="align-center" src="../_images/Difference_Level_155.png" style="width: 650px;" /></a>
</section>
<section id="the-routing-and-profile-services">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">The Routing and Profile Services</a><a class="headerlink" href="#the-routing-and-profile-services" title="Permalink to this heading">¶</a></h2>
<p>First click on the blue flag then place your starting point on the
map, do the same with the red flag to get the shortest path computed
by the dedicated service and then display its profile. Note that when
you pass the mouse over the profile display then you will see its
corresponding position displayed on the map. You can also click on a
specific step in your path to get the corresponding line displayed.</p>
<a class="reference internal image-reference" href="../_images/Routing_Basic4.png"><img alt="../_images/Routing_Basic4.png" class="align-center" src="../_images/Routing_Basic4.png" style="width: 650px;" /></a>
<p>If you take a look in the file: <code class="docutils literal notranslate"><span class="pre">/usr/lib/cgi-bin/routing/do.zcfg</span></code>
you may notice something new in the supported format which is
reproduced here after.</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Supported&gt;</span>
 mimeType = image/png
 asReference = true
 msStyle = STYLE COLOR 125 250 105 OUTLINECOLOR 0 0 0 WIDTH 3 END
 useMapServer = true
 extension = json
<span class="nt">&lt;/Supported&gt;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">mimeType</span></code> is defined as <code class="docutils literal notranslate"><span class="pre">image/png</span></code> and there is two new
parameter which are both optional:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">useMapServer</span></code>: which make you able to inform the ZOO-Kernel
that it have to use MapServer to publish your result as WMS / WFS or WCS (this last
won’t be used in this workshop) rather than simply storing the
result as a file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">msStyle</span></code>: which let you define your own MapServer <code class="docutils literal notranslate"><span class="pre">STYLE</span></code> block definition.</p></li>
</ul>
</div></blockquote>
<p>When you need to access a result many time or for different purpose
accross other services then it is really useful to ask ZOO-Kernel to
publish your result as WMS, WFS or WCS.</p>
<p>Note that no modification of the code of the do service was required
to handle automatic pubilcation of the result as it is a vector format
supported by OGR, only modification of the zcfg was required.</p>
<p>This routing example is here to illustrate how easy it is to publish
your result as WMS, WFS or WCS ressource. Indeed, when your routing
service was called, ZOO-Kernel published the result as WMS and WFS
ressources which was both used first for the UI purpose, the WMS to
display the resulting path on the map, the WFS for displaying details
about each steps. The WFS protocol is also used as the input value
for the profile computation. So, the computation was run once
and accessed three times for different purposes and from different
clients.</p>
<p>For more informations about the MapServer support, please refer to <a class="reference external" href="http://zoo-project.org/docs/kernel/mapserver.html">the
official  ZOO-Project Documentation</a>.</p>
</section>
<section id="conclusion">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Conclusion</a><a class="headerlink" href="#conclusion" title="Permalink to this heading">¶</a></h2>
<p>Now you know this three services, and you get a simple interface to interact
with your MapServer WFS and your ZOO-Project WPS Servers, you are ready to use
the Services in a different way, by chaining them using the JavaScript ZOO-API to build
more complexe and powerfull services.</p>
</section>
</section>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="js_services_chaining.html" class="btn btn-neutral float-right" title="Playing with buildign blocks - Creating JavaScript Web Services">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="first_service.html" class="btn btn-neutral" title="Creating your first ZOO Service"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>
  <div class="pfoot">
  <div role="contentinfo">
    <p>
        &copy; Copyright 2009-2023, ZOO-Project team. This work is released under a Creative Commons Attribution-ShareAlike 4.0 International Public License.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> inspired by <a href="https://readthedocs.org">Read the Docs</a>.
</div>
</footer>

        </div>
      </div>

    </section>

  </div>
  


  
    <div id="documentation_options" data-version="1.7" data-url_root="../"></div>
    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.7',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/sphinx_highlight.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>