

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Creating your first ZOO-Service &mdash; ZOO-Project 1.7 documentation</title>
  
  <link href="http://fonts.googleapis.com/css?family=Days+One" rel="stylesheet" type="text/css">
  
  

  

  
  
    
      <link rel="search" type="application/opensearchdescription+xml" title="Search within ZOO-Project 1.7 documentation" href="../../_static/opensearch.xml"/>
    

  

  
  

  
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="ZOO-Project 1.7 documentation" href="../../index.html"/>
        <link rel="up" title="ZOO-Project – Introduction to OGC API - Processes - Part 1: Core" href="index.html"/>
        <link rel="next" title="Building blocks presentation" href="building_blocks_presentation.html"/>
        <link rel="prev" title="Installation, configuration and ZOO-Kernel use" href="using_zoo_from_docker.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        

        
	  <a class="shrink" href="http://zoo-project.org"><img src="http://zoo-project.org/images/zoo-sun-logo.png" class="img-responsive sun" style="display: inline;"> ZOO</a>
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">ZOO-Project – Introduction to OGC API - Processes - Part 1: Core</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="using_zoo_from_docker.html">Installation, configuration and ZOO-Kernel use</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Creating your first ZOO-Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="building_blocks_presentation.html">Building blocks presentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="js_services_chaining.html">Playing with building blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="solutions.html">Issue playing with building blocks?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../foss4g-europe/index.html">ZOO-Project – Introduction to OGC API - Processes - Part 1: Core</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../foss4g-europe/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../foss4g-europe/using_zoo_from_docker.html">Installation, configuration and ZOO-Kernel use</a></li>
<li class="toctree-l2"><a class="reference internal" href="../foss4g-europe/first_service.html">Creating your first ZOO-Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../foss4g-europe/building_blocks_presentation.html">Building blocks presentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../foss4g-europe/js_services_chaining.html">Playing with building blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../foss4g-europe/solutions.html">Issue playing with building blocks?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../2023/foss4g/index.html">ZOO-Project – Introduction to OGC API - Processes - Part 1: Core</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../2023/foss4g/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2023/foss4g/using_zoo_from_docker.html">Installation, configuration and ZOO-Kernel use</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2023/foss4g/first_service.html">Creating your first ZOO Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2023/foss4g/building_blocks_presentation.html">Building blocks presentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2023/foss4g/js_services_chaining.html">Playing with building blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2023/foss4g/solutions.html">Issue playing with building blocks?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../2023/ogc-member-meeting/index.html">ZOO-Project introduction to OGC API - Processes - Part 1: Core secutiy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../2023/ogc-member-meeting/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2023/ogc-member-meeting/using_zoo_from_docker.html">Installation, configuration and ZOO-Kernel use</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2023/ogc-member-meeting/setup_security_basicauth.html">Secure access to specific end-points using HTTP Basic Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2023/ogc-member-meeting/setup_security_openid_connect.html">Using OpenID Connect 1.0 to authenticate</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../2022/index.html">ZOO-Project workshop 2022</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../2022/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2022/using_zoo_from_docker.html">Installation, configuration and ZOO-Kernel use</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2022/first_service.html">Creating your first ZOO Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2022/building_blocks_presentation.html">Building blocks presentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2022/js_services_chaining.html">Playing with building blocks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../2017/index.html">ZOO-Project workshop 2017</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../2017/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2017/using_zoo_from_osgeolivevm.html">Configuration and ZOO-Kernel use</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2017/first_service.html">Creating your first ZOO Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2017/building_blocks_presentation.html">Building blocks presentation - Using OGR and PgRouting based Web Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2017/js_services_chaining.html">Playing with buildign blocks - Creating JavaScript Web Services</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../2016/index.html">ZOO-Project workshop 2016</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../2016/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2016/using_zoo_from_osgeolivevm.html">Configuration and ZOO-Kernel use</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2016/first_service.html">Creating your first ZOO Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2016/building_blocks_presentation.html">Building blocks presentation - Using OGR and PgRouting based Web Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2016/js_services_chaining.html">Playing with buildign blocks - Creating JavaScript Web Services</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../2015/index.html">ZOO-Project workshop 2015</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../2015/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2015/using_zoo_from_osgeolivevm.html">Configuration and ZOO-Kernel use</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2015/first_service.html">Creating your first ZOO Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2015/building_blocks_presentation.html">Building blocks presentation - Using OGR and PgRouting based Web Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2015/js_services_chaining.html">Playing with buildign blocks - Creating JavaScript Web Services</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../2014/index.html">ZOO-Project workshop 2014</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../2014/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2014/using_zoo_from_osgeolivevm.html">Configuration and ZOO-Kernel use</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2014/first_service.html">Creating your first ZOO Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2014/building_blocks_presentation.html">Building blocks presentation - Using OGR and PgRouting based Web Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2014/js_services_chaining.html">Playing with buildign blocks - Creating JavaScript Web Services</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../2013/index.html">ZOO-Project Workshop 2013</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../2013/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2013/using_zoo_from_osgeolivevm.html">Configuration and ZOO-Kernel use</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2013/first_service.html">Create your first ZOO Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2013/building_blocks_presentation.html">Building blocks presentation - Using OGR and PgRouting based Web Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2013/js_services_chaining.html">Playing with buildign blocks - Creating JavaScript Web Services</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../2012/index.html">ZOO-Project Workshop 2012</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../2012/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2012/using_zoo_from_osgeolivevm.html">Configuration and ZOO-Kernel use</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2012/first_service.html">Creating your first ZOO Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2012/building_blocks_presentation.html">Presenting building blocks - Using OGR based Web Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2012/js_services_chaining.html">Playing with buildign blocks - Creating JavaScript Web Services</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../2010/index.html">ZOO-Project Workshop 2010</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../2010/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2010/using_zoo_from_osgeolivevm.html">Using ZOO from an OSGeoLive virtual machine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2010/ogr_base_vect_ops.html">Creating OGR based Web Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2010/building_wps_client_using_ol.html">Building a WPS client using OpenLayers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2010/exercise.html">Exercise</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ZOO-Project</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">

    <li><a href="../../index.html"> Workshops</a> &#8725; &#160;</li>
      
          <li><a href="index.html">ZOO-Project – Introduction to OGC API - Processes - Part 1: Core</a> &#8725; &#160;</li>
      
    <li>Creating your first ZOO-Service</li>
      <li class="wy-breadcrumbs-aside">
        $Date$
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <section id="creating-your-first-zoo-service">
<span id="first-service"></span><h1><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Creating your first ZOO-Service</a><a class="headerlink" href="#creating-your-first-zoo-service" title="Link to this heading">¶</a></h1>
<nav class="contents" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#creating-your-first-zoo-service" id="id6">Creating your first ZOO-Service</a></p>
<ul>
<li><p><a class="reference internal" href="#introduction" id="id7">Introduction</a></p></li>
<li><p><a class="reference internal" href="#service-and-publication-process-overview" id="id8">Service and publication process overview</a></p></li>
<li><p><a class="reference internal" href="#creating-your-first-zcfg-file" id="id9">Creating your first ZCFG file</a></p></li>
<li><p><a class="reference internal" href="#test-requests" id="id10">Test requests</a></p>
<ul>
<li><p><a class="reference internal" href="#test-accessing-the-processes-list" id="id11">Test accessing the processes list</a></p></li>
<li><p><a class="reference internal" href="#test-accessing-the-detailled-description-of-the-process" id="id12">Test accessing the detailled description of the process</a></p></li>
<li><p><a class="reference internal" href="#test-to-execute-the-process" id="id13">Test to Execute the process</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#implementing-the-python-service" id="id14">Implementing the Python Service</a></p>
<ul>
<li><p><a class="reference internal" href="#general-principles" id="id15">General Principles</a></p></li>
<li><p><a class="reference internal" href="#the-hello-service" id="id16">The Hello Service</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#conclusion" id="id17">Conclusion</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>In this secion, you will create and publish a simple ZOO-Service named
<code class="docutils literal notranslate"><span class="pre">Hello</span></code> which will simply return a hello message containing the
input value provided. It will be usefull to present in deeper details
general concept on how ZOO-Kernel works and handles execution
requests.</p>
</section>
<section id="service-and-publication-process-overview">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Service and publication process overview</a><a class="headerlink" href="#service-and-publication-process-overview" title="Link to this heading">¶</a></h2>
<p>Before starting developing a ZOO Service, you should remember that in
ZOO-Project, a Service is a couple made of:</p>
<blockquote>
<div><ul class="simple">
<li><p>a metadata file: a ZOO Service Configuration File (ZCFG) containing metadata
informations about a Service (providing informations about default / supported
inputs and outputs for a Service)</p></li>
<li><p>a Services Provider: it depends on the programming language used, but for Python it
is a module and for JavaScript a script file.</p></li>
</ul>
</div></blockquote>
<p>To publish your Service, which means make your ZOO Kernel aware of its presence,
you should copy a ZCFG file in the directory where <code class="docutils literal notranslate"><span class="pre">zoo_loader.cgi</span></code>
is located (in this workshop, <code class="docutils literal notranslate"><span class="pre">/usr/lib/cgi-bin</span></code>) or in any
subdirectory.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>only the ZCFG file is required  for the Service to be considerate as
available. So if you don’t get the Service Provider, obviously your Execute
request will fail as we will discuss later.</p>
</div>
<p>Before publication, you should store your ongoing work, so you’ll start by
creating a directory to store the files of your Services Provider:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mkdir -p docker/ws2024_sp
</pre></div>
</div>
<p>Once the ZCFG and the Python module are both ready, you can publish simply
by copying the corresponding files in the same directory as the ZOO-Kernel.</p>
</section>
<section id="creating-your-first-zcfg-file">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Creating your first ZCFG file</a><a class="headerlink" href="#creating-your-first-zcfg-file" title="Link to this heading">¶</a></h2>
<p>You will start by creating the ZCFG file for the <code class="docutils literal notranslate"><span class="pre">Hello</span></code> Service. Edit the
<code class="docutils literal notranslate"><span class="pre">docker/ws2024_sp/Hello.zcfg</span></code> file
and add the following content:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[Hello]
 Title = Return a hello message.
 Abstract = Create a welcome string.
 processVersion = 2
 storeSupported = true
 statusSupported = true
 serviceProvider = test_service
 serviceType = Python
 &lt;DataInputs&gt;
  [name]
   Title = Input string
   Abstract = The string to insert in the hello message.
   minOccurs = 1
   maxOccurs = 1
   &lt;LiteralData&gt;
       dataType = string
       &lt;Default /&gt;
   &lt;/LiteralData&gt;
 &lt;/DataInputs&gt;
 &lt;DataOutputs&gt;
  [Result]
   Title = The resulting string
   Abstract = The hello message containing the input string
   &lt;LiteralData&gt;
       dataType = string
       &lt;Default /&gt;
   &lt;/LiteralData&gt;
 &lt;/DataOutputs&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the name of the ZCFG file and the name between braket (here <code class="docutils literal notranslate"><span class="pre">[Hello]</span></code>)
should be the same and correspond to the function name you will define in your
Services provider.</p>
</div>
<p>As you can see in the ZOO Service Configuration File presented above it is divided into
three distinct sections:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Main Metadata information (from line 2 to 8)</p></li>
<li><p>List of Inputs metadata information (from 9 line to 19)</p></li>
<li><p>List of Outputs metadata information (from line 20 to 28)</p></li>
</ol>
</div></blockquote>
<p>You can get more informations about ZCFG from <a class="reference external" href="http://zoo-project.org/docs/services/zcfg-reference.html">the reference documentation</a>.</p>
<p>If you copy the <code class="docutils literal notranslate"><span class="pre">Hello.zcfg</span></code> file in a sub-directory (<code class="docutils literal notranslate"><span class="pre">ws2024</span></code>) of
your ZOO Kernel  then, you will be able to request for DescribeProcess
using the <code class="docutils literal notranslate"><span class="pre">ws2024.Hello</span></code>  Identifier. The <code class="docutils literal notranslate"><span class="pre">ws2024.Hello</span></code>
service should also be listed from Capabilities document.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cp docker/ws2024_sp/Hello.zcfg docker/ws2024
</pre></div>
</div>
</section>
<section id="test-requests">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Test requests</a><a class="headerlink" href="#test-requests" title="Link to this heading">¶</a></h2>
<p>In this section you will tests each WPS requests : GetCapabilities,
DescribeProcess and Execute. Note that only GetCapabilities and DescribeProcess
should work at this step.</p>
<section id="test-accessing-the-processes-list">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Test accessing the processes list</a><a class="headerlink" href="#test-accessing-the-processes-list" title="Link to this heading">¶</a></h3>
<p>To access the processes list, you can use the following endpoint:
<a class="reference external" href="http://localhost/ogc-api/processes">/processes</a>.</p>
<p>Now, you should find your <a href="#id1"><span class="problematic" id="id2">`</span></a>ws2024.Hello`processes listed as shown bellow.</p>
<a class="reference internal image-reference" href="../../_images/oapip-processes-list-hello2.png"><img alt="../../_images/oapip-processes-list-hello2.png" class="align-center" src="../../_images/oapip-processes-list-hello2.png" style="width: 450px;" />
</a>
<p>You can also directly use the following URL:
<a class="reference external" href="http://localhost/ogc-api/processes.html">/processes.html</a> to
search for your service, as illustrated bellow.</p>
<a class="reference internal image-reference" href="../../_images/oapip-processes-list-hello-search-html2.png"><img alt="../../_images/oapip-processes-list-hello-search-html2.png" class="align-center" src="../../_images/oapip-processes-list-hello-search-html2.png" style="width: 450px;" />
</a>
</section>
<section id="test-accessing-the-detailled-description-of-the-process">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Test accessing the detailled description of the process</a><a class="headerlink" href="#test-accessing-the-detailled-description-of-the-process" title="Link to this heading">¶</a></h3>
<p>To access the detailled description of the ws2024.Hello process, you
can use the following endpoint: <a class="reference external" href="http://localhost/ogc-api/processes/ws2024.Hello">/processes/ws2024.Hello</a>.</p>
<a class="reference internal image-reference" href="../../_images/oapip-processes-description-hello-json2.png"><img alt="../../_images/oapip-processes-description-hello-json2.png" class="align-center" src="../../_images/oapip-processes-description-hello-json2.png" style="width: 450px;" />
</a>
<p>To access the HTML form giving you the capability to generate an
execute request based on the description of the ws2024.Hello process, you
can use the following URL: <a class="reference external" href="http://localhost/ogc-api/processes/ws2024.Hello.html">/processes/ws2024.Hello.html</a>.</p>
<a class="reference internal image-reference" href="../../_images/oapip-processes-description-hello-html2.png"><img alt="../../_images/oapip-processes-description-hello-html2.png" class="align-center" src="../../_images/oapip-processes-description-hello-html2.png" style="width: 450px;" />
</a>
</section>
<section id="test-to-execute-the-process">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Test to Execute the process</a><a class="headerlink" href="#test-to-execute-the-process" title="Link to this heading">¶</a></h3>
<p>Obviously, you cannot run your Service because the Python file was not published
yet. If you try the following <code class="docutils literal notranslate"><span class="pre">Execute</span></code> request from the Basic HTML
UI, you should get the same result as illutrated bellow.</p>
<a class="reference internal image-reference" href="../../_images/oapip-processes-execute-hello-html-not-found2.png"><img alt="../../_images/oapip-processes-execute-hello-html-not-found2.png" class="align-center" src="../../_images/oapip-processes-execute-hello-html-not-found2.png" style="width: 850px;" />
</a>
</section>
</section>
<section id="implementing-the-python-service">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Implementing the Python Service</a><a class="headerlink" href="#implementing-the-python-service" title="Link to this heading">¶</a></h2>
<section id="general-principles">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">General Principles</a><a class="headerlink" href="#general-principles" title="Link to this heading">¶</a></h3>
<p>The most important thing you must know when implementing a new ZOO-Services
using the Python language is that the function corresponding to your Service
returns an integer value representing the status of execution
(<code class="docutils literal notranslate"><span class="pre">SERVICE_FAILED</span></code> <a class="footnote-reference brackets" href="#f1" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> or <code class="docutils literal notranslate"><span class="pre">SERVICE_SUCCEEDED</span></code> <a class="footnote-reference brackets" href="#f2" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>) and takes three
arguments (<a class="reference external" href="http://docs.python.org/tutorial/datastructures.html#dictionaries">Python dictionaries</a>):</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">conf</span></code> : the main environment configuration (corresponding to the main.cfg content)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inputs</span></code> : the requested / default inputs (used to access input values)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outputs</span></code> : the requested / default outputs (used to store computation result)</p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>when your service return <code class="docutils literal notranslate"><span class="pre">SERVICE_FAILED</span></code> you can set
<code class="docutils literal notranslate"><span class="pre">conf[&quot;lenv&quot;][&quot;message&quot;]</span></code> to add a personalized message in the ExceptionReport
returned by the ZOO Kernel in such case.</p>
</div>
<p>You can find bellow the first 3 sections of the <cite>main.cfg</cite> (seen
<a class="reference external" href="using_zoo_from_docker.html#zoo-kernel-configuration">before</a>)
file stored in a <code class="docutils literal notranslate"><span class="pre">conf</span></code> variable as a Python dictionnary.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="p">{</span>
<span class="linenos"> 2</span>    <span class="s2">&quot;main&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos"> 3</span>	<span class="s2">&quot;encoding&quot;</span><span class="p">:</span> <span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
<span class="linenos"> 4</span>	<span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
<span class="linenos"> 5</span>	<span class="s2">&quot;serverAddress&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost/cgi-bin/zoo_loader.cgi&quot;</span><span class="p">,</span>
<span class="linenos"> 6</span>	<span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
<span class="linenos"> 7</span>	<span class="s2">&quot;lang&quot;</span><span class="p">:</span> <span class="s2">&quot;fr-FR,en-CA,en-US&quot;</span><span class="p">,</span>
<span class="linenos"> 8</span>	<span class="s2">&quot;tmpPath&quot;</span><span class="p">:</span><span class="s2">&quot;/tmp/zTmp/&quot;</span><span class="p">,</span>
<span class="linenos"> 9</span>	<span class="s2">&quot;tmpUrl&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost/temp/&quot;</span><span class="p">,</span>
<span class="linenos">10</span>	<span class="s2">&quot;dataPath&quot;</span><span class="p">:</span> <span class="s2">&quot;/usr/com/zoo-project&quot;</span><span class="p">,</span>
<span class="linenos">11</span>	<span class="s2">&quot;cacheDir&quot;</span><span class="p">:</span> <span class="s2">&quot;/tmp/zTmp/&quot;</span><span class="p">,</span>
<span class="linenos">12</span>	<span class="s2">&quot;templatesPath&quot;</span><span class="p">:</span> <span class="s2">&quot;/var/www/&quot;</span><span class="p">,</span>
<span class="linenos">13</span>	<span class="s2">&quot;mapserverAddress&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost/cgi-bin/mapserv&quot;</span><span class="p">,</span>
<span class="linenos">14</span>	<span class="s2">&quot;msOgcVersion&quot;</span><span class="p">:</span><span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
<span class="linenos">15</span>	<span class="s2">&quot;cors&quot;</span><span class="p">:</span><span class="s2">&quot;true&quot;</span><span class="p">,</span>
<span class="linenos">16</span>	<span class="s2">&quot;msConfig&quot;</span><span class="p">:</span> <span class="s2">&quot;/mapserver/etc/mapserver.conf&quot;</span>
<span class="linenos">17</span>    <span class="p">},</span>
<span class="linenos">18</span>    <span class="s2">&quot;identification&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos">19</span>	<span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;The ZOO-Project OGC WPS Developement Server&quot;</span><span class="p">,</span>
<span class="linenos">20</span>	<span class="s2">&quot;abstract&quot;</span><span class="p">:</span> <span class="s2">&quot;Developement version of ZOO-Project OGC WPS. See http://www.zoo-project.org&quot;</span><span class="p">,</span>
<span class="linenos">21</span>	<span class="s2">&quot;fees&quot;</span><span class="p">:</span> <span class="s2">&quot;None&quot;</span><span class="p">,</span>
<span class="linenos">22</span>	<span class="s2">&quot;accessConstraints&quot;</span><span class="p">:</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
<span class="linenos">23</span>	<span class="s2">&quot;keywords&quot;</span><span class="p">:</span> <span class="s2">&quot;WPS,GIS,buffer&quot;</span>
<span class="linenos">24</span>    <span class="p">},</span>
<span class="linenos">25</span>    <span class="s2">&quot;provider&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos">26</span>	<span class="s2">&quot;providerName&quot;</span><span class="p">:</span><span class="s2">&quot;ZOO-Project&quot;</span><span class="p">,</span>
<span class="linenos">27</span>	<span class="s2">&quot;providerSite&quot;</span><span class="p">:</span><span class="s2">&quot;http://www.zoo-project.org&quot;</span><span class="p">,</span>
<span class="linenos">28</span>	<span class="s2">&quot;individualName&quot;</span><span class="p">:</span> <span class="s2">&quot;Gerald FENOY&quot;</span><span class="p">,</span>
<span class="linenos">29</span>	<span class="s2">&quot;positionName&quot;</span><span class="p">:</span><span class="s2">&quot;Developer&quot;</span><span class="p">,</span>
<span class="linenos">30</span>	<span class="s2">&quot;role&quot;</span><span class="p">:</span><span class="s2">&quot;Dev&quot;</span><span class="p">,</span>
<span class="linenos">31</span>	<span class="s2">&quot;addressDeliveryPoint&quot;</span><span class="p">:</span><span class="s2">&quot;1280, avenue des Platanes&quot;</span><span class="p">,</span>
<span class="linenos">32</span>	<span class="s2">&quot;addressCity&quot;</span><span class="p">:</span><span class="s2">&quot;Lattes&quot;</span><span class="p">,</span>
<span class="linenos">33</span>	<span class="s2">&quot;addressAdministrativeArea&quot;</span><span class="p">:</span> <span class="s2">&quot;False&quot;</span><span class="p">,</span>
<span class="linenos">34</span>	<span class="s2">&quot;addressPostalCode&quot;</span><span class="p">:</span> <span class="s2">&quot;34970&quot;</span><span class="p">,</span>
<span class="linenos">35</span>	<span class="s2">&quot;addressCountry&quot;</span><span class="p">:</span><span class="s2">&quot;fr&quot;</span><span class="p">,</span>
<span class="linenos">36</span>	<span class="s2">&quot;addressElectronicMailAddress&quot;</span><span class="p">:</span> <span class="s2">&quot;gerald.fenoy@geolabs.fr&quot;</span><span class="p">,</span>
<span class="linenos">37</span>	<span class="s2">&quot;phoneVoice&quot;</span><span class="p">:</span> <span class="s2">&quot;False&quot;</span><span class="p">,</span>
<span class="linenos">38</span>	<span class="s2">&quot;phoneFacsimile&quot;</span><span class="p">:</span><span class="s2">&quot;False&quot;</span>
<span class="linenos">39</span>    <span class="p">}</span>
</pre></div>
</div>
<p>In the following you get a sample outputs value passed to a Python or a JavaScript Service:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="s1">&#39;Result&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">3</span><span class="w">    </span><span class="s1">&#39;dataType&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">    </span><span class="s1">&#39;inRequest&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;true&#39;</span>
<span class="linenos">5</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">6</span><span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the <code class="docutils literal notranslate"><span class="pre">inRequest</span></code> value is set internally by the ZOO-Kernel and can be    used to determine from the Service if the key was provided in the request.</p>
</div>
<p>ZOO-Project provide a ZOO-API which was originally only available for
JavaScript services, but thanks to the work of the ZOO-Project
community, now you have also access to a ZOO-API when using
the Python language. Thanks to the Python ZOO-API you don’t have to remember anymore
the value of SERVICE_SUCCEDED and SERVICE_FAILED, you
have the capability to translate any string from your Python service
by calling the <code class="docutils literal notranslate"><span class="pre">_</span></code> function (ie: <code class="docutils literal notranslate"><span class="pre">zoo._('My</span> <span class="pre">string</span> <span class="pre">to</span>
<span class="pre">translate')</span></code>) or to update the current status of a running service by
using the <code class="docutils literal notranslate"><span class="pre">update_status</span></code> <a class="footnote-reference brackets" href="#f4" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a> function the same way you use it from
JavaScript or C services.</p>
</section>
<section id="the-hello-service">
<h3><a class="toc-backref" href="#table-of-contents" role="doc-backlink">The Hello Service</a><a class="headerlink" href="#the-hello-service" title="Link to this heading">¶</a></h3>
<p>You can copy and paste the following into the
<code class="docutils literal notranslate"><span class="pre">docker/ws2024_sp/test_service.py</span></code> file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">zoo</span>
<span class="k">def</span><span class="w"> </span><span class="nf">Hello</span><span class="p">(</span><span class="n">conf</span><span class="p">,</span><span class="n">inputs</span><span class="p">,</span><span class="n">outputs</span><span class="p">):</span>
    <span class="n">outputs</span><span class="p">[</span><span class="s2">&quot;Result&quot;</span><span class="p">][</span><span class="s2">&quot;value&quot;</span><span class="p">]</span><span class="o">=</span>\
            <span class="s2">&quot;Hello &quot;</span><span class="o">+</span><span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">][</span><span class="s2">&quot;value&quot;</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot; from the FOSS4G-Europe 2024!&quot;</span>
    <span class="k">return</span> <span class="n">zoo</span><span class="o">.</span><span class="n">SERVICE_SUCCEEDED</span>
</pre></div>
</div>
<p>Once you finish editing the file, you should copy it in the <code class="docutils literal notranslate"><span class="pre">ws2024</span></code> directory:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cp docker/ws2024_sp/test_service.py docker/ws2024
</pre></div>
</div>
<p>If you try to run the previous request again from the HTML Basic UI,
you should get a result similar to what is presented bellow.</p>
<a class="reference internal image-reference" href="../../_images/oapip-processes-execute-hello-html-value2.png"><img alt="../../_images/oapip-processes-execute-hello-html-value2.png" class="align-center" src="../../_images/oapip-processes-execute-hello-html-value2.png" style="width: 850px;" />
</a>
</section>
</section>
<section id="conclusion">
<h2><a class="toc-backref" href="#table-of-contents" role="doc-backlink">Conclusion</a><a class="headerlink" href="#conclusion" title="Link to this heading">¶</a></h2>
<p>Even if this first service was really simple it was useful to illustrate how the
ZOO-Kernel fill <code class="docutils literal notranslate"><span class="pre">conf</span></code>, <code class="docutils literal notranslate"><span class="pre">inputs</span></code> and <code class="docutils literal notranslate"><span class="pre">outputs</span></code> parameter prior to load
and run your function service, how to write a ZCFG file, how to publish a Services
Provider by placing the ZCFG and Python files in the same directory as the
ZOO-Kernel, then how to interract with your service using both
<code class="docutils literal notranslate"><span class="pre">GetCapabilities</span></code>, <code class="docutils literal notranslate"><span class="pre">DescribeProcess</span></code> and <code class="docutils literal notranslate"><span class="pre">Execute</span></code> requests. We will see
in the <a class="reference external" href="building_blocks_presentation.html">next section</a> how to write similar requests
using the XML syntax.</p>
<p class="rubric">Footnotes</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="f1" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">1</a><span class="fn-bracket">]</span></span>
<p><code class="docutils literal notranslate"><span class="pre">SERVICE_FAILED=4</span></code></p>
</aside>
<aside class="footnote brackets" id="f2" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">2</a><span class="fn-bracket">]</span></span>
<p><code class="docutils literal notranslate"><span class="pre">SERVICE_SUCCEEDED=3</span></code></p>
</aside>
<aside class="footnote brackets" id="f4" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">3</a><span class="fn-bracket">]</span></span>
<p>sample use of update_status is available <a class="reference external" href="http://zoo-project.org/trac/browser/trunk/zoo-project/zoo-services/utils/status/cgi-env/service.py#L1">here</a></p>
</aside>
<aside class="footnote brackets" id="f3" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></span>
<p>To get on-going status url in <code class="docutils literal notranslate"><span class="pre">statusLocation</span></code>, you’ll
need to setup the <a class="reference external" href="http://www.zoo-project.org/trac/browser/trunk/zoo-project/zoo-services/utils/status">utils/status</a>
Service. If you don’t get this service available, the ZOO-Kernel will
simply give the url to a flat XML file stored on the server which will
contain, at the end of the execution, the result of the Service
execution. For more informations please take a look into the
reference  <a class="reference external" href="http://zoo-project.org/docs/services/status.html">documentation</a>.</p>
</aside>
</aside>
</section>
</section>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="building_blocks_presentation.html" class="btn btn-neutral float-right" title="Building blocks presentation">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="using_zoo_from_docker.html" class="btn btn-neutral" title="Installation, configuration and ZOO-Kernel use"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>
  <div class="pfoot">
  <div role="contentinfo">
    <p>
        &copy; Copyright 2009-2023, ZOO-Project team. This work is released under a Creative Commons Attribution-ShareAlike 4.0 International Public License.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> inspired by <a href="https://readthedocs.org">Read the Docs</a>.
</div>
</footer>

        </div>
      </div>

    </section>

  </div>
  


  
    <div id="documentation_options" data-version="1.7" data-url_root="../../"></div>
    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.7',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/sphinx_highlight.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>